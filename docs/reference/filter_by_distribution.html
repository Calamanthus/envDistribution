<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Filter species occurrence records by spatial layers representing their distributions at state and or national scales. e.g. IUCN Red List or EPBC (Environmental Protection and Biodiversity Conservation act) distributions. — filter_by_distribution • envDistribution</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Filter species occurrence records by spatial layers representing their distributions at state and or national scales. e.g. IUCN Red List or EPBC (Environmental Protection and Biodiversity Conservation act) distributions. — filter_by_distribution"><meta property="og:description" content="Filter species occurrence records by spatial layers representing their distributions at state and or national scales.
e.g. IUCN Red List or EPBC (Environmental Protection and Biodiversity Conservation act) distributions."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">envDistribution</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Calamanthus/envDistribution/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Filter species occurrence records by spatial layers representing their distributions at state and or national scales. e.g. IUCN Red List or EPBC (Environmental Protection and Biodiversity Conservation act) distributions.</h1>
    <small class="dont-index">Source: <a href="https://github.com/Calamanthus/envDistribution/blob/HEAD/R/filter_by_distribution.R" class="external-link"><code>R/filter_by_distribution.R</code></a></small>
    <div class="hidden name"><code>filter_by_distribution.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Filter species occurrence records by spatial layers representing their distributions at state and or national scales.
e.g. IUCN Red List or EPBC (Environmental Protection and Biodiversity Conservation act) distributions.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter_by_distribution</span><span class="op">(</span></span>
<span>  <span class="va">presence</span>,</span>
<span>  <span class="va">state</span>,</span>
<span>  <span class="va">national</span>,</span>
<span>  <span class="va">out_file</span>,</span>
<span>  pres_x <span class="op">=</span> <span class="st">"long"</span>,</span>
<span>  pres_y <span class="op">=</span> <span class="st">"lat"</span>,</span>
<span>  pres_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  use_crs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  buffer_km <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  buffer_override <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  remove <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">state_poly</span>,</span>
<span>  <span class="va">data_ext_poly</span>,</span>
<span>  force_new <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>presence</dt>
<dd><p>Dataframe of presences for a taxa (i.e. containing x,y coordinate columns).</p></dd>


<dt>state</dt>
<dd><p>Character. File path/s for the relevant state distributions per taxa.
If no relevant state distribution, then use NA and filtering will only be conducted using the national distribution. Currently, only parquet files are accepted.
Use sfarrow::st_write_parquet to write sf objects to parquet.</p></dd>


<dt>national</dt>
<dd><p>Character. File path/s for the relevant national distributions per taxa.
If no relevant national distribution, then use NA and filtering will only be conducted using the state distribution,
but will maintain all interstate records (if any exist). As with <code>state</code>, only parquet files are currently accepted.</p></dd>


<dt>out_file</dt>
<dd><p>Character. Path for a parquet file to save a pre-filtered dataframe per taxa with records flagged as
dist_in = 0 or 1. If previous outputs exist, these outputs will be used to determine what records are new
and need to be assessed/filtered, which can save processing time in datasets with many taxa
and or complex distributions.</p></dd>


<dt>pres_x, pres_y</dt>
<dd><p>Character. Name of the columns in <code>presence</code> that have the x and y coordinates.</p></dd>


<dt>pres_crs</dt>
<dd><p>Integer. Coordinate reference system that the presence coordinates correspond to (epsg code).</p></dd>


<dt>use_crs</dt>
<dd><p>Integer. Coordinate reference system (epsg code) to use as the standard for all objects in spatial joins or intersections.
Using a projected coordinate system removes the sf warning around assuming coordinates are planar if they're not, and
can sometimes help with spherical geometry issues. If NULL, the crs of the distribution will be used as the standard
(i.e. the presence coords and the data_ext_poly will be converted to this crs before joining or intersecting).</p></dd>


<dt>buffer_km</dt>
<dd><p>Integer. Distance in kilometres used to buffer the distribution and keep records in that radius.
Use 0 for no buffer.</p></dd>


<dt>buffer_override</dt>
<dd><p>Character vector. Vector of character strings representing distribution sources reflected in file paths
for sources that should not be buffered. Used to override the buffer for particular distribution sources where buffering may not be relevant.
For example, EPBC distributions already include a 'may occur' area, and if these are stored in a directory called 'epbc_dists',
then can use this string to override the buffer for taxa with these distributions.</p></dd>


<dt>remove</dt>
<dd><p>Logical. Remove out of distribution records? If FALSE, out of distribution records will be flagged (see below).</p></dd>


<dt>state_poly</dt>
<dd><p>sf object. Polygon representing the state boundary for state and interstate record delineation.</p></dd>


<dt>data_ext_poly</dt>
<dd><p>sf object. Polygon representing the data extent to use for broad level filtering of taxa
with distributions that do not intersect the area of interest.</p></dd>


<dt>force_new</dt>
<dd><p>Logical. Force new taxa outputs? If TRUE, any previous taxa outputs will be ignored and
new filtering/flagging of records conducted.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Presence dataframe with out of range records either removed (if remove == TRUE),
or flagged with '1' in the dist_out field (if remove == FALSE). In addition, regardless of <code>remove</code>,
a pre-filtered dataframe will be written to the <code>out_file</code> path that contains records flagged as in or out (1 or 0)
in the 'dists_in' field.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Joel Allan, Nigel Willoughby.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

